{% extends "base.html" %}

{% block bodyblock %}

<!-- Main container -->
<div class="max-w-7xl mx-auto px-6 py-10">

    <!-- Two-column layout -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- Left column (form / text) -->
        <div class="lg:col-span-4">
            <h3 class="text-2xl font-semibold mb-2">
                Gender Classification
            </h3>

            <p class="text-gray-700 leading-snug">
                Upload an image (.jpg, .jpeg, .png). Our model will detect the face first
                and then predict gender based on the face (Male or Female).
            </p>

            <form action="#" method="POST" enctype="multipart/form-data" class="flex justify-start mt-4">
                <div class="flex items-center shadow-sm">
                    
                    <div class="relative flex w-48 items-stretch"> <input 
                            type="file" 
                            name="image_name" 
                            required 
                            class="block w-full text-[10px] text-gray-400 bg-white rounded-l border border-gray-300 
                                cursor-pointer focus:outline-none
                                file:mr-3 file:py-2 file:px-3
                                file:rounded-l file:border-0
                                file:text-xs file:font-normal
                                file:bg-[#e9ecef] file:text-gray-700
                                hover:file:bg-gray-200"
                        >
                    </div>

                    <button 
                        type="submit" 
                        class="relative -ml-px inline-flex items-center rounded-r border border-blue-500 bg-white px-3 py-2 text-xs font-medium text-blue-600 hover:bg-blue-600 hover:text-white transition-colors focus:outline-none whitespace-nowrap"
                    >
                        Upload & Predict
                    </button>
                    
                </div>
            </form>
        </div>

        <!-- Right column (report / prediction output)
        <div class="lg:col-span-8">
            <!-- report: prediction image, reporting (grayscale, eigen image and probability score) -->
        <!-- </div> --> 
        <!-- Right column (report / prediction output) -->
        <!-- <div class="lg:col-span-8 flex justify-center items-center">

            {% if fileupload %}
                <img 
                    src="{{ url_for('static', filename='predict/prediction_image.jpg') }}" 
                    alt="Predicted Image"
                    class="max-w-full h-auto rounded-lg shadow-md"
                >
            {% else %}
                <p class="text-gray-400">No image uploaded yet</p>
            {% endif %}

        </div> -->

        <!-- Right column (report / prediction output) -->
        <div class="lg:col-span-8">

            {% if fileupload %}

                <!-- Predicted Image -->
                <div class="flex justify-center mb-6">
                    <img 
                        src="{{ url_for('static', filename='predict/prediction_image.jpg') }}" 
                        alt="Predicted Image"
                        class="max-w-full max-h-[420px] object-contain rounded-xl shadow-lg border p-2 bg-white"
                    >
                </div>

                <!-- Report Table -->
                <div class="overflow-x-auto">
                    <table class="min-w-full border border-gray-300 rounded-lg overflow-hidden">

                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 border">Detection Face</th>
                                <th class="px-4 py-2 border">Eigen Image</th>
                                <th class="px-4 py-2 border">Prediction Gender</th>
                                <th class="px-4 py-2 border">Score</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for element in report %}
                            <tr class="text-center">

                                <td class="border p-2">
                                    <img src="/static/predict/{{ element[0] }}" height="100" class="mx-auto">
                                </td>

                                <td class="border p-2">
                                    <img src="/static/predict/{{ element[1] }}" height="100" class="mx-auto">
                                </td>

                                <td class="border p-2 font-semibold">
                                    {{ element[2] }}
                                </td>

                                <td class="border p-2">
                                    {{ element[3] }}
                                </td>

                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>
                </div>

            {% else %}

                <!-- Default message when no image uploaded -->
                <div class="flex justify-center items-center h-[400px] text-gray-400">
                    Upload an image to see prediction report
                </div>

            {% endif %}

        </div>


            
    </div>

</div>

{% endblock %}
